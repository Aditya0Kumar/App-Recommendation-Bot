<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Recommendation Bot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="bg-gray-100 flex flex-col items-center p-6">
    <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-lg text-center">
        <h1 class="text-2xl font-semibold text-gray-700 mb-4">App Search</h1>

        
        <div class="flex flex-col space-y-2 mb-4">
            <input type="text" id="search-input" class="p-2 border rounded-lg" placeholder="Enter app name">

            <button onclick="searchApp()" class="bg-blue-500 text-white px-4 py-2 rounded-lg">Search</button>
        </div>
    </div>

    
    <div id="results" class="w-full max-w-2xl mt-6 space-y-4"></div>

    
    <button onclick="toggleDarkMode()" class="absolute top-4 right-4 bg-black text-white px-3 py-1 rounded-lg"><i class="fa-solid fa-circle-half-stroke"></i></button>


    
    <script>
        async function searchApp() {
            const query = document.getElementById("search-input").value;
            if (!query) return;

            
            const response = await fetch(`/search?q=${query}`);
            const data = await response.json();
            const resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "";

            if(data.length === 0){
                resultsDiv.innerHTML = "<p class='text-red-500'>No results found.</p>";
                return;
            }

            displayResults(data);
        }

        function displayResults(results){
            const resultsDiv = document.getElementById("results");

            results.forEach(app => {
                const box = document.createElement("div");
                box.classList.add("flex", "items-center", "bg-white", "p-4", "rounded-lg", "shadow-md", "gap-4");
                box.innerHTML = `
                    <img src="${app.thumbnail}" alt="App Image" class="w-20 h-20 rounded-lg">
                    <div class="text-left">
                        <h3 class="text-lg font-semibold text-gray-800">${app.title}</h3>
                        <p class="text-sm text-gray-600"><strong>Author:</strong> ${app.author}</p>
                        <p class="text-sm text-yellow-500"><strong>Rating:</strong> ${app.rating} ‚≠ê</p>
                        <a href="${app.link}" target="_blank" class="text-blue-500 hover:underline font-medium">View on Store</a>
                    </div>
                `;
                resultsDiv.appendChild(box);
            });
        }

        function toggleDarkMode(){
            document.body.classList.toggle("bg-gray-900");
            document.body.classList.toggle("text-black");
        }
    </script>
</body>
</html>
